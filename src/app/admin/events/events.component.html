<div class="container-fluid">
  <h3 class="fw-bold my-4">Events Dashboard</h3>
  <div class="text-end mb-2">
    <button class="text-end btn btn-cfPrimary" (click)="openDialog('Create')">Create Event</button>
  </div>

  <div class="table-container mat-elevation-z8 mb-4">
    @if (dataSource.data.length <= 0) {
      <p class="text-center p-2 mt-2">No data found for filtered options.</p>
    } @else {
      <table mat-table [dataSource]="dataSource">
        <ng-container matColumnDef="webinarId">
          <th mat-header-cell *matHeaderCellDef>Event Id</th>
          <td mat-cell *matCellDef="let element">{{ element.webinarId }}</td>
        </ng-container>

        <ng-container matColumnDef="title">
          <th mat-header-cell *matHeaderCellDef>Title</th>
          <td mat-cell *matCellDef="let element">
            {{ element.title }}&nbsp;<i class="bi bi-info-circle" [title]="element.desc"></i>
          </td>
        </ng-container>

        <ng-container matColumnDef="startAt">
          <th mat-header-cell *matHeaderCellDef>Start Date</th>
          <td mat-cell *matCellDef="let element">
            {{ element.startAt | date: 'MMM dd, yyyy HH:mm' : '+0530' }}
          </td>
        </ng-container>

        <ng-container matColumnDef="endAt">
          <th mat-header-cell *matHeaderCellDef>End Date</th>
          <td mat-cell *matCellDef="let element">
            {{ element.endAt | date: 'MMM dd, yyyy HH:mm' : '+0530' }}
          </td>
        </ng-container>

        <ng-container matColumnDef="updatedAt">
          <th mat-header-cell *matHeaderCellDef>Updated On</th>
          <td mat-cell *matCellDef="let element">
            {{ element.updatedAt | date: 'MMM dd, yyyy HH:mm' : '+0530' }}
          </td>
        </ng-container>

        <ng-container matColumnDef="redirectionLink">
          <th mat-header-cell *matHeaderCellDef>Form Link</th>
          <td mat-cell *matCellDef="let element">
            <a [href]="element.redirectionLink">Click here!</a>
          </td>
        </ng-container>

        <ng-container matColumnDef="eventStatus">
          <th mat-header-cell *matHeaderCellDef>Event Status</th>
          <td mat-cell *matCellDef="let element">
            {{ element.eventStatus === 1 ? 'Active' : 'Draft' }}
          </td>
        </ng-container>

        <ng-container matColumnDef="edit">
          <th mat-header-cell *matHeaderCellDef>Edit Event</th>
          <td mat-cell *matCellDef="let element">
            <div class="d-flex justify-content-between">
              <button class="btn btn-link p-0 border-0" (click)="editEvent(element)">
                <i class="bi bi-pencil-square"></i>
              </button>
              <button class="btn btn-link p-0 border-0" (click)="removeEventById(element)">
                <i class="bi bi-trash-fill text-danger"></i>
              </button>
            </div>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
      </table>
    }
  </div>
</div>
