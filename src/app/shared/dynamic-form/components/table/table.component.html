<!-- <mat-card>
    <mat-card-header>
        <mat-card-title style="font-size: 20px;">{{field.label}}</mat-card-title>
        <mat-card-actions>
            <button mat-button (click)="collapsed=true">Collapse text</button>
            <button mat-button (click)="collapsed=false">Uncollapse text</button>
        </mat-card-actions>
    </mat-card-header>

    <mat-card-content *ngIf="!collapsed">
        <div class="table-responsive" [formGroup]="group">
            <table class="table" [formArrayName]="field.key">
                <tbody>
                    <tr *ngFor="let row of field.tableRow;let i = index;" [formGroupName]="i">
                        <td>{{row.label}}</td>
                        <td *ngFor="let col of row.tableData;let j = index;" [formArrayName]="row.key">
                            @switch (col.formFieldType) {
                            @case ('number') {
                            <app-input [field]="col" [group]="getTableGroup(field.key, i, row.key, j)"></app-input>
                            }
                            @case ('heading') {
                            {{col.label}}
                            }
                            @case ('select') {
                            <app-select [field]="col" [options]="row.options"
                                [group]="getTableGroup(field.key, i, row.key, j)"></app-select>
                            }
                            }    
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </mat-card-content>
</mat-card> -->

<mat-expansion-panel  [expanded]="panelOpenState">
    <mat-expansion-panel-header>
      <mat-panel-title>
        {{field.label}}
      </mat-panel-title>
      <!-- <mat-panel-description>
        This is a summary of the content
      </mat-panel-description> -->
    </mat-expansion-panel-header>
    <div class="table-responsive" [formGroup]="group">
        <table class="table" [formArrayName]="field.key">
            <!-- <tr>
            <th>heading</th>
            <th>2021</th>
        </tr> -->
            <tbody>
                <tr *ngFor="let row of field.tableRow;let i = index;" [formGroupName]="i">
                    <!-- <tr *ngFor="let row of field.tableRow;let i = index;" > -->
                    <!-- <tr *ngFor="let row of field.tableRow;let i = index;" [formArrayName]="group.controls[row.key]"> -->
                    <td class="first-col">{{row.position ? row.position+'. ':''}}{{row.label}}
                        <span style="color: red;" *ngIf="row.required">*</span>
                        <span class="info-icon"
                        *ngIf="row.info"
                        matTooltip="{{row.info}}">
                        i</span>
                    </td>
                    <td *ngFor="let col of row.tableData;let j = index;" [formArrayName]="row.key">
                        <!-- <td *ngFor="let col of row.tableData;let j = index;"> -->
                        @switch (col.formFieldType) {
                        @case ('amount') {
                        <app-input [field]="col" [group]="getTableGroup(field.key, i, row.key, j)"></app-input>
                        }
                        @case ('heading') {
                        {{col.label}}
                        }
                        @case ('select') {
                        <app-select [field]="col" [options]="row.options"
                            [group]="getTableGroup(field.key, i, row.key, j)"></app-select>
                        }
                        }

                    </td>
                </tr>
            </tbody>
        </table>
    </div>
  </mat-expansion-panel>
